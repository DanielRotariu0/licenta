{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from \"@angular/core\";\nlet JobsComponent = class JobsComponent {\n  constructor(jobService, countryService, companyService, workTypeService) {\n    this.jobService = jobService;\n    this.countryService = countryService;\n    this.companyService = companyService;\n    this.workTypeService = workTypeService;\n    this.totalElements = 0;\n    this.totalPages = 0;\n    this.page = 0;\n    this.maxJobs = 5;\n    this.selectedCountries = [];\n    this.selectedCompanies = [];\n    this.selectedWorkTypes = [];\n  }\n\n  ngOnInit() {\n    this.jobService.getJobs(this.page, this.maxJobs).subscribe(jobQueryResponse => {\n      this.jobs = this.toJobList(jobQueryResponse.jobList);\n      this.totalElements = jobQueryResponse.totalElements;\n      this.totalPages = jobQueryResponse.totalPages;\n      this.selectedJob = this.jobs[0];\n      setTimeout(() => this.paginator.changePage(this.page));\n    });\n    this.countryService.getCountries().subscribe(countries => {\n      this.countries = countries;\n    });\n    this.companyService.getCompanies().subscribe(companies => {\n      this.companies = companies;\n    });\n  }\n\n  setSelectedJob(job) {\n    this.selectedJob = job;\n  }\n\n  onClickFilter() {\n    this.jobs = [];\n    this.page = 0;\n    this.jobService.getJobs(this.page, this.maxJobs, this.selectedCountries, this.selectedCompanies).subscribe(jobQueryResponse => {\n      this.jobs = this.toJobList(jobQueryResponse.jobList);\n      this.totalElements = jobQueryResponse.totalElements;\n      this.totalPages = jobQueryResponse.totalPages;\n      this.selectedJob = this.jobs[0];\n    });\n  }\n\n  onPageChange(event) {\n    this.jobs = [];\n    this.jobService.getJobs(event.page, this.maxJobs, this.selectedCountries, this.selectedCompanies).subscribe(jobQueryResponse => {\n      this.jobs = this.toJobList(jobQueryResponse.jobList);\n    });\n  }\n\n  toJobList(jobResponseList) {\n    return jobResponseList.map(response => this.jobService.toJob(response));\n  }\n\n};\n\n__decorate([ViewChild(\"paginator\", {\n  static: true\n})], JobsComponent.prototype, \"paginator\", void 0);\n\nJobsComponent = __decorate([Component({\n  selector: \"app-jobs\",\n  templateUrl: \"./jobs.component.html\",\n  styleUrls: [\"./jobs.component.css\"]\n})], JobsComponent);\nexport { JobsComponent };","map":null,"metadata":{},"sourceType":"module"}